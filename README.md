# gindex
google indexing api example (golang)

# 動機
search console のカバレージを見ると、除外が 170 ほどあった。

* 検出 - インデックス未登録が 84 件
* クロール済み - インデックス未登録が 72 件

URL 検査で「インデックス登録をリクエスト」すると、1日ほどすると、site: 検索に出てくるみたい。なんでなん・・・
google さん、しょうもないブログやからインデックスしたくないの？

index api というのがあって、求人情報の更新用にだけ使えるらしいが、blogger のページなどを食わせるとどうなるのか。

windows に(自分が比較的不自由なく使える)python を入れるのもめんどいし、たまには使っておかないと忘れてしまうので golang で書いてみた。

# 使い方
1. (gcp コンソール)google cloud platform のコンソールにアクセスして、何か適当なプロジェクトを作る。
2. (gcp コンソール)APIとサービス > 認証情報を開いてサービスアカウント(*1)を作る。キーは作って、search-console-api.json(*2) として保存。
4. (gcp コンソール)APIとサービスの有効化で、indexing API を有効にする
5. (サーチコンソール) 設定 > ユーザーと権限で (*1) のメールアドレスを追加。このメールアドレスは「オーナー」になっていないと index 登録リクエスト時にエラーになる。(現オーナーの右側のスリードットメニューから所有者を足す必要があった)
6. (*2)のcredentials search-console-api.json を実行ディレクトリに置く
7. gindex.exe update 更新したいURLやcsvファイル...csvファイルはカバレージの除外ページで「クロール済み - インデックス未登録」などをクリックして表示される画面をcsvでエクスポートしたもの。

# 効果
効果があるかどうかまだ不明。なので、google api を叩くサンプルにでも使ってください。
